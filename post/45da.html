<!-- build time:Sat Feb 15 2020 18:37:51 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"><title itemprop="name">Valine - 一款快速、简洁且高效的无后端评论系统 | cungudafa</title><link rel="shortcut icon" href="/images/favicon.ico"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+SerifMerriweather|Merriweather+Sans|Source+Code+Pro|Ubuntu:400,700|Noto+Serif+SC" media="all"><link rel="dns-prefetch" href="//cdn.jsdelivr.net"><link rel="stylesheet" id="saukra_css-css" href="/css/style.css" type="text/css" media="all"><link rel="stylesheet" href="/css/lib.min.css" media="all"><link rel="stylesheet" href="/css/font.css" media="all"><link rel="stylesheet" href="/css/insight.css" media="all"><link rel="stylesheet" href="/css/jquery.fancybox.min.css" media="all"><link rel="stylesheet" href="/css/zoom.css" media="all"><link rel="stylesheet" type="text/css" href="/css/sharejs.css"><link rel="stylesheet" type="text/css" href="/css/logo.css"><link rel="stylesheet" type="text/css" href="/fonts/LOGO/logo.css"><script>var mashiro_option=new Object,mashiro_global=new Object;mashiro_option.NProgressON=!0,mashiro_option.email_domain="",mashiro_option.email_name="",mashiro_option.cookie_version_control="",mashiro_option.qzone_autocomplete=!1,mashiro_option.site_name="cungudafa姑",mashiro_option.author_name="姑",mashiro_option.site_url="https://cungudafa.gitee.io/",mashiro_option.v_appId="cBzr9TtJ0xY0s6f3H8bpmB3M-gzGzoHsz",mashiro_option.v_appKey="3opMyv2Vyx3mHa0IWitRGSoi",mashiro_option.mathjax="0",mashiro_option.qq_api_url="https://api.mashiro.top/qqinfo/",mashiro_option.qq_avatar_api_url="https://api.mashiro.top/qqinfo/"</script><script type="text/javascript">var bg="https://cdn.jsdelivr.net/gh/cungudafa/cdn@1.6/img/cover/(1).jpg.webp,https://cdn.jsdelivr.net/gh/cungudafa/cdn@1.6/img/cover/(2).jpg.webp,https://cdn.jsdelivr.net/gh/cungudafa/cdn@1.6/img/cover/(3).jpg.webp,https://cdn.jsdelivr.net/gh/cungudafa/cdn@1.6/img/cover/(4).jpg.webp,https://cdn.jsdelivr.net/gh/cungudafa/cdn@1.6/img/cover/(5).jpg.webp,https://cdn.jsdelivr.net/gh/cungudafa/cdn@1.6/img/cover/(6).jpg.webp,https://cdn.jsdelivr.net/gh/cungudafa/cdn@1.6/img/cover/(7).jpg.webp,https://cdn.jsdelivr.net/gh/cungudafa/cdn@1.6/img/cover/(8).jpg.webp".split(","),bgindex=Math.floor(Math.random()*bg.length);(window.ActiveXObject||"ActiveXObject"in window)&&alert("朋友，IE浏览器未适配哦~")</script><style type="text/css">.hljs-ln{border-collapse:collapse}.hljs-ln td{padding:0}.hljs-ln-n:before{content:attr(data-line-number)}</style><style type="text/css">.site-top .lower nav{display:block!important}#pagination a:hover,.author-profile i,.float-content i:hover,.post-content a:hover,.post-like a,.post-more i:hover,.post-share .show-share,.sub-text,.we-info a,span.sitename{color:#FE9600}.ar-time i,.comment .comment-reply-link,.download,.feature i,.links ul li:before,.navigator i:hover,.object,.siren-checkbox-radio:checked+.siren-checkbox-radioInput:after,span.ar-circle{background:#FE9600}::-webkit-scrollbar-thumb{background:#FE9600}#pagination a:hover,.comment-respond input[type=submit]:hover,.download,.link-title,.links ul li:hover,.navigator i:hover{border-color:#FE9600}#archives-temp h3,#comments-navi a.next,#comments-navi a.prev,.comment h4 a,.comment h4 a:hover,.comment-respond input[type=submit]:hover,.entry-content a:hover,.entry-title a:hover,.site-info a:hover,.site-title a:hover,.site-top ul li a:hover,.sorry li a:hover,i.iconfont.js-toggle-search.iconsearch:hover,span.page-numbers.current{color:#FE9600}.comments .comments-main{display:block!important}.comments .comments-hidden{display:none!important;background-position:center;background-attachment:inherit}</style><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="cungudafa" type="application/atom+xml"></head></html><body class="page-template page-template-user page-template-page-analytics page-template-userpage-analytics-php page page-id-1297 chinese-font serif isWebKit"><div class="scrollbar" id="bar"></div><a href="#" class="cd-top faa-float animated"></a><section id="main-container"><div class="headertop filter-dot"><div id="banner_wave_1"></div><div id="banner_wave_2"></div><figure id="centerbg" class="centerbg"><div class="focusinfo no-select"><div class="header-tou"><a href="https://cungudafa.gitee.io/"><img src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/img/custom/cungudafa.jpg"></a></div><div class="header-info"><p>莫三天打鱼两天晒网</p><div class="top-social_v2"><li id="bg-pre"><img class="flipx" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg"></li><li><a href="http://github.com/cungudafa" target="_blank" class="social-github" title="github"><img src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/img/social/github.png"></a></li><li><a href="http://weibo.com/3829198906/info" target="_blank" class="social-github" title="sina"><img src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/img/social/sina.png"></a></li><li><a href="https://music.163.com/#/user/home?id=337394988" target="_blank" class="social-github" title="wangyiyun"><img src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/img/social/wangyiyun.png"></a></li><li><a href="https://www.zhihu.com/people/cungudafa" target="_blank" class="social-github" title="zhihu"><img src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/img/social/zhihu.png"></a></li><li><a href="/#" target="_blank" class="social-github" title="email"><img src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/img/social/email.svg"></a></li><li class="wechat"><a href="/#"><img src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/img/social/wechat.png"></a><div class="wechatInner"><img src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/img/custom/wechat.jpg"></div></li><li id="bg-next"><img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg"></li></div></div></div></figure><div id="video-container"><video style="object-fit:fill" id="bgvideo" class="video" video-name="" src="" width="auto" preload="auto"></video><div id="video-btn" class="loadvideo videolive"></div><div id="video-add"></div><div class="video-stu"></div></div><div class="headertop-down faa-float animated" onclick="headertop_down()"><span><i class="fa fa-chevron-down" aria-hidden="true"></i></span></div></div><div id="page" class="site wrapper"><header class="site-header no-select gizle sabit" role="banner"><div class="site-top"><div class="site-branding"><span class="site-title"><span class="logolink logo"><a href="/"><ruby><span class="sakuraso">姑</span> <span class="no">の</span> <span class="shironeko">小屋</span> <rp></rp> <rt class="logo">cungudafa</rt> <rp></rp></ruby></a></span></span></div><div class="searchbox search-form-submit"><i class="iconfont js-toggle-search iconsearch icon-search"></i></div><div id="show-nav" class="showNav mobile-fit"><div class="line line1"></div><div class="line line2"></div><div class="line line3"></div></div><div class="lower-cantiner"><div class="lower"><nav class="mobile-fit-control hide"><ul id="menu-new" class="menu"><li><a href="/"><span class="faa-parent animated-hover"><i class="fa fa-fort-awesome faa-shake" aria-hidden="true"></i> 首页</span></a></li><li><a href="/archives"><span class="faa-parent animated-hover"><i class="fa fa-archive faa-shake" aria-hidden="true"></i> 归档</span></a><ul class="sub-menu"><li><a href="/categories/%E6%8A%80%E6%9C%AF/"><i class="fa fa-code" aria-hidden="true"></i> 技术</a></li><li><a href="/categories/%E7%94%9F%E6%B4%BB/"><i class="fa fa-file-text-o" aria-hidden="true"></i> 生活</a></li><li><a href="/categories/%E8%B5%84%E6%BA%90/"><i class="fa fa-cloud-download" aria-hidden="true"></i> 资源</a></li><li><a href="/categories/%E9%9A%8F%E6%83%B3/"><i class="fa fa-commenting-o" aria-hidden="true"></i> 随想</a></li><li><a href="/categories/%E8%BD%AC%E8%BD%BD/"><i class="fa fa-book" aria-hidden="true"></i> 转载</a></li></ul></li><li><a href="javascript:;"><span class="faa-parent animated-hover"><i class="fa fa-list-ul faa-vertical" aria-hidden="true"></i> 清单</span></a><ul class="sub-menu"><li><a href="/tags/%E6%82%A6%E8%AF%BB/"><i class="fa fa-th-list faa-bounce" aria-hidden="true"></i> 书单</a></li><li><a href="/bangumi/"><i class="fa fa-film faa-vertical" aria-hidden="true"></i> 番组</a></li><li><a href="/music/"><i class="fa fa-headphones" aria-hidden="true"></i> 歌单</a></li><li><a href="/tags/%E5%9B%BE%E9%9B%86/"><i class="fa fa-photo" aria-hidden="true"></i> 图集</a></li></ul></li><li><a href="/comment/"><span class="faa-parent animated-hover"><i class="fa fa-pencil-square-o faa-tada" aria-hidden="true"></i> 留言板</span></a></li><li><a href="/links/"><span class="faa-parent animated-hover"><i class="fa fa-link faa-shake" aria-hidden="true"></i> 友人帐</span></a></li><li><a href="/donate/"><span class="faa-parent animated-hover"><i class="fa fa-heart faa-pulse" aria-hidden="true"></i> 赞赏</span></a></li><li><a href="/"><span class="faa-parent animated-hover"><i class="fa fa-leaf faa-wrench" aria-hidden="true"></i> 关于</span></a><ul class="sub-menu"><li><a href="/about/"><i class="fa fa-meetup" aria-hidden="true"></i> 我？</a></li><li><a href="/theme-sakura/"><i class="fa iconfont icon-sakura" aria-hidden="true"></i> 主题</a></li><li><a href="/lab/"><i class="fa fa-cogs" aria-hidden="true"></i> Lab</a></li></ul></li><li><a href="/client/"><span class="faa-parent animated-hover"><i class="fa fa-android faa-vertical" aria-hidden="true"></i> 客户端</span></a></li><li><a href="/atom.xml"><span class="faa-parent animated-hover"><i class="fa fa-rss faa-pulse" aria-hidden="true"></i> RSS</span></a></li></ul></nav></div></div></div></header><link rel="stylesheet" type="text/css" href="/css/sharejs.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css"><div class="pattern-center-blank"></div><div class="pattern-center single-center"><div class="pattern-attachment-img lazyload" style="background-image:url(https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1536893704,2656419314&amp;fm=26&amp;gp=0.jpg)" src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1536893704,2656419314&amp;fm=26&amp;gp=0.jpg"></div><header class="pattern-header single-header"><h1 class="entry-title">Valine - 一款快速、简洁且高效的无后端评论系统</h1><p class="entry-census"><span><a href="https://cungudafa.gitee.io"><img src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/img/custom/cungudafa.jpg"> </a></span><span><a href="https://cungudafa.gitee.io">cungudafa</a> </span><span class="bull">·</span> 2020-2-12<span class="bull"> ·</span> 热度 <span id="busuanzi_value_page_pv"></span>℃</p><div style="margin-top:10px"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i> <span class="post-meta-item-text">字数统计: </span><span class="post-count">1k字</span> </span></span><span class="post-time">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="fa fa-hourglass-half"></i> <span class="post-meta-item-text">阅读时长: </span><span class="post-count">4分</span></span></span></div></header></div><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main" role="main"><article id="post-1" class="post-1 post type-post status-publish format-standard has-post-thumbnail hentry category-uncategorized"><div class="toc"></div><div class="entry-content"><h1 id="一、Valine简介"><a href="#一、Valine简介" class="headerlink" title="一、Valine简介"></a>一、Valine简介</h1><p><a href="https://valine.js.org/" target="_blank" rel="noopener">Valine</a> - 一款快速、简洁且高效的无后端评论系统。<br>Valine 诞生于2017年8月7日，是一款基于LeanCloud的快速、简洁且高效的无后端评论系统。</p><p>理论上支持但不限于静态博客，目前已有<code>Hexo、Jekyll、Typecho、Hugo、Ghost</code> 等博客程序在使用Valine。<br><img src="https://img-blog.csdnimg.cn/20200212171148447.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2N1bmd1ZGFmYQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="二、使用方法"><a href="#二、使用方法" class="headerlink" title="二、使用方法"></a>二、使用方法</h1><h2 id="1-获取-APP-ID-和-APP-KEY"><a href="#1-获取-APP-ID-和-APP-KEY" class="headerlink" title="1.获取 APP ID 和 APP KEY"></a>1.获取 APP ID 和 APP KEY</h2><ol><li><p><a href="https://leancloud.cn/dashboard/login.html#/signup" target="_blank" rel="noopener">在Leancloud用邮箱注册登录</a><br>需要实名制认证，邮箱认证。</p></li><li><p><a href="https://leancloud.cn/dashboard/applist.html#/newapp" target="_blank" rel="noopener">创建Valine应用</a><br>命名为 <code>Valine</code>，方案选择<code>开发版</code>，即可以在一定的用量限制下免费运行。</p></li><li><p>进入创建好的<code>应用&gt;设置&gt;选择应用 Key</code>，就能获取到 App ID 和 App Key。</p></li><li><p>为了您的数据安全，请填写<code>应用&gt;设置&gt;安全设置</code>中的<code>Web 安全域名</code>：<br><img src="https://img-blog.csdnimg.cn/20200212160022335.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2N1bmd1ZGFmYQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h2 id="2-配置Sakura"><a href="#2-配置Sakura" class="headerlink" title="2.配置Sakura"></a>2.配置Sakura</h2></li><li><p>编辑 <code>sakura/_config.yml</code>，找到对应的模块，修改配置如下：</p><pre><code> valine: true
 v_appId: cBzr9TtJ0xY0s6f3H8bpmB3M-gzGzoHsz
 v_appKey: 3opMyv2Vyx3mHa0IWitRGSoi</code></pre></li><li><p>重新发布Hexo测试<br>进入helloworld文章，发布评论：<br><img src="https://img-blog.csdnimg.cn/20200212163028420.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2N1bmd1ZGFmYQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>leancode也会相应记录一条数据：<br><img src="https://img-blog.csdnimg.cn/2020021216312949.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2N1bmd1ZGFmYQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p></li><li><p>深度美化<br><code>MyWeb\themes\sakura\layout\_partial</code>目录下，修改<code>comment.ejs</code>:<br>原样式：</p><pre><code> &lt;% if (theme.valine &amp;&amp; post.comments) { %&gt;
 &lt;div id=&quot;vcomments&quot;&gt;&lt;/div&gt;
 &lt;script&gt;
   window.onload = function(){
       var valine = new Valine();
       valine.init({
         el: &#39;#vcomments&#39;,
         appId: &quot;&lt;%= theme.v_appId %&gt;&quot;,
         appKey: &quot;&lt;%= theme.v_appKey %&gt;&quot;,
         path: window.location.pathname,
         placeholder: &quot;你是我一生只会遇见一次的惊喜 ...&quot;
       })
   }
 &lt;/script&gt;
 &lt;% } %&gt;</code></pre><p>可根据需要修改。</p><blockquote><p>valine的原作者暂时还没有对hexo（sakura）主题进行配置，<br><a href="https://valine.js.org/hexo.html#hexo-theme-yilia" target="_blank" rel="noopener">这里是原作者已更新的Hexo支持的主题</a></p></blockquote><h1 id="三、-sakura配置valine"><a href="#三、-sakura配置valine" class="headerlink" title="三、 sakura配置valine"></a>三、 sakura配置valine</h1><blockquote><p>以下配置全参考于：valine原作者配置<a href="https://github.com/litten/hexo-theme-yilia/pull/646" target="_blank" rel="noopener">hexo-theme-yilia</a>主题</p></blockquote></li></ol><p>在前两步的基础上，<br>修改sakura主题配置：（加了enable标志和其他属性）<br>（之前一直用mm头像，现在改为小怪物）</p><pre><code># Valine ##极简留言功能
# You can get your appid and appkey from https://leancloud.cn
# more info please open https://valine.js.org
valine:
  enable: true ##打开valine评论功能true
  appId: cBzr9TtJ0xY0s6f3H8bpmB3M-gzGzoHsz
  appKey: 3opMyv2Vyx3mHa0IWitRGSoi
  notify: false #评论mail回复提醒
  verify: true #验证码
  visitor: false #统计阅读量
  avatar: monsterid # Gravatar style : mp/identicon/monsterid/wavatar/retro/hide
  guest_info: nick #,mail,link # custom comment header
  pageSize: 10
  palaceholder: 你是我一生只会遇见一次的惊喜 # Comment Box placeholder
</code></pre><p>修改头部的声明：<code>themes\sakura\layout\_partial\head.ejs</code><br>（v_appId改为appId）</p><pre><code>  mashiro_option.v_appId = &quot;&lt;%= theme.valine.appId %&gt;&quot;;//
  mashiro_option.v_appKey = &quot;&lt;%= theme.valine.appKey %&gt;&quot;;</code></pre><p>修改样式：<code>themes\sakura\layout\_partial\comment.ejs</code><br>（注意判断标准为theme.valine.enable，加入了邮箱审核标准，未填写邮箱不能评论。）</p><pre><code>&lt;% if (theme.valine.enable &amp;&amp; post.comments) { %&gt;
&lt;div id=&quot;vcomments&quot;&gt;&lt;/div&gt;
&lt;script src=&quot;//unpkg.com/valine/dist/Valine.min.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
    new Valine({
        el: &#39;#vcomments&#39;,
        appId: &quot;&lt;%= theme.valine.appId %&gt;&quot;,
        appKey: &quot;&lt;%= theme.valine.appKey %&gt;&quot;,
        path: window.location.pathname,
        notify: false,
        verify: true,
        avatar: &#39;monsterid&#39;,//小怪物头像
        placeholder: &quot;你是我一生只会遇见一次的惊喜 ...&quot;  
  });
  document.body.addEventListener(&#39;click&#39;, function(e) {
    if (e.target.classList.contains(&#39;vsubmit&#39;)) {
        const email = document.querySelector(&#39;input[type=email]&#39;);
        const nick = document.querySelector(&#39;input[name=nick]&#39;);
        const reg = /^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;
        if (!email.value || !nick.value || !reg.test(email.value)) {
            const str = `&lt;div class=&quot;valert txt-center&quot;&gt;&lt;div class=&quot;vtext&quot;&gt;请填写正确的昵称和邮箱！&lt;/div&gt;&lt;/div&gt;`;
            const vmark = document.querySelector(&#39;.vmark&#39;);
            vmark.innerHTML = str;
            vmark.style.display = &#39;block&#39;;

            setTimeout(function() {
                vmark.style.display = &#39;none&#39;;
                vmark.innerHTML = &#39;&#39;;
            }, 2500);
        }
      }
    });
&lt;/script&gt;
&lt;% } %&gt;</code></pre><p>运行效果：<br><img src="https://img-blog.csdnimg.cn/20200215002234755.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2N1bmd1ZGFmYQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>自定义的邮箱审核机制：<br><img src="https://img-blog.csdnimg.cn/20200214182127479.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2N1bmd1ZGFmYQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="四、头像说明"><a href="#四、头像说明" class="headerlink" title="四、头像说明"></a>四、头像说明</h1><p><img src="https://img-blog.csdnimg.cn/20200215003353534.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2N1bmd1ZGFmYQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>其中未知名头像都是小怪物（==avatar: ‘monsterid’==），更多头像选择<code>mp/identicon/monsterid/wavatar/retro/hide</code><br><img src="https://img-blog.csdnimg.cn/20200215003206833.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2N1bmd1ZGFmYQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>如何使用自定义头像呢？</p><blockquote><p>Valine 目前使用的是Gravatar 作为评论列表头像。</p><ol><li>请自行登录或<a href="http://cn.gravatar.com/" target="_blank" rel="noopener">注册Gravatar</a>，然后修改自己的头像。</li><li><strong>评论</strong>的时候，<strong>留下</strong>在Gravatar注册时所使用的<strong>邮箱</strong>即可。<br>(任何gravator的网站，留邮箱即显示头像，全球化，很nice哦!)<br><img src="https://img-blog.csdnimg.cn/20200215003130938.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2N1bmd1ZGFmYQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li></ol></blockquote><hr><blockquote><p>附：在sakura主题中，<code>themes\sakura\source\js\sakura-app.js</code>第1100行也有类似部分；在head.ejs中，sakura作者注明过这段sakura-app.js作用于php，这里暂未使用，如果有需要用到时同样修改：<br><img src="https://img-blog.csdnimg.cn/20200214171236689.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2N1bmd1ZGFmYQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p></blockquote></div><div class="single-reward"><div class="reward-open">赏<div class="reward-main"><ul class="reward-row"><li class="alipay-code"><img src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/img/custom/donate/AliPay.jpg"></li><li class="wechat-code"><img src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/img/custom/donate/WeChatPay.png"></li></ul></div></div></div><div style="text-align:center;width:100%" class="social-share share-mobile" data-disabled="diandian, tencent"></div><footer class="post-footer"><div class="post-lincenses" style="color:#f96">欢迎转载，转载时请注明来源哦！<br><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="nofollow"><i class="fa fa-creative-commons" aria-hidden="true"></i>知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a></div><div class="post-tags"></div><div class="post-share"><div class="social-share sharehidden share-component"></div><i class="iconfont show-share icon-forward"></i></div></footer></article><div class="toc" style="background:0 0"></div><section class="post-squares nextprev"><div class="post-nepre half previous"><a href="/post/d214.html" rel="prev"><div class="background"><img class="lazyload" src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1581599486505&di=17e94cba0deed92629482255b45e4119&imgtype=0&src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farticle%2F6ca95ac6f2189d17a0e8ffdb9b5a5ed6e57a4d29.jpg" style="width:100%;height:100%;object-fit:cover;pointer-events:none" onerror="imgError(this,3)" src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1581599486505&di=17e94cba0deed92629482255b45e4119&imgtype=0&src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farticle%2F6ca95ac6f2189d17a0e8ffdb9b5a5ed6e57a4d29.jpg"></div><span class="label">Previous Post</span><div class="info"><h3>Hexo（sakura）添加live2d看板动画（可对话，换装互动）</h3><hr></div></a></div><div class="post-nepre half next"><a href="/post/2a9.html" rel="next"><div class="background"><img class="lazyload" src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1581599780027&di=b8dfe75a2d9a31743cba15f2c98f032d&imgtype=jpg&src=http%3A%2F%2Fimg4.imgtn.bdimg.com%2Fit%2Fu%3D1036027984%2C2620666265%26fm%3D214%26gp%3D0.jpg" style="width:100%;height:100%;object-fit:cover;pointer-events:none" onerror="imgError(this,3)" src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1581599780027&di=b8dfe75a2d9a31743cba15f2c98f032d&imgtype=jpg&src=http%3A%2F%2Fimg4.imgtn.bdimg.com%2Fit%2Fu%3D1036027984%2C2620666265%26fm%3D214%26gp%3D0.jpg"></div><span class="label">Next Post</span><div class="info"><h3>Github+jsDelivr搭建自己的免费cdn</h3><hr></div></a></div></section><div id="vcomments"></div><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>new Valine({
        el: '#vcomments',
        appId: "cBzr9TtJ0xY0s6f3H8bpmB3M-gzGzoHsz",
        appKey: "3opMyv2Vyx3mHa0IWitRGSoi",
        path: window.location.pathname,
        notify: false,
        verify: true,
        avatar: 'monsterid',//小怪物头像
        placeholder: "你是我一生只会遇见一次的惊喜 ..."  
  });
  document.body.addEventListener('click', function(e) {
    if (e.target.classList.contains('vsubmit')) {
        const email = document.querySelector('input[type=email]');
        const nick = document.querySelector('input[name=nick]');
        const reg = /^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;
        if (!email.value || !nick.value || !reg.test(email.value)) {
            const str = `<div class="valert txt-center"><div class="vtext">请填写正确的昵称和邮箱！</div></div>`;
            const vmark = document.querySelector('.vmark');
            vmark.innerHTML = str;
            vmark.style.display = 'block';

            setTimeout(function() {
                vmark.style.display = 'none';
                vmark.innerHTML = '';
            }, 2500);
        }
      }
    });</script><section class="author-profile"><div class="info" itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="https://cungudafa.gitee.io" class="profile gravatar"><img src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/img/custom/cungudafa.jpg" itemprop="image" alt="cungudafa" height="70" width="70"></a><div class="meta"><span class="title">Author</span><h3 itemprop="name"><a href="https://cungudafa.gitee.io" itemprop="url" rel="author">cungudafa</a></h3></div></div><hr><p><i class="iconfont icon-write"></i>姑，一个学习记录者</p></section></main></div></div></div><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="请输入关键词..."> <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>!function(T){var O={TRANSLATION:{POSTS:"文章",CATEGORIES:"分类",TAGS:"标签"},ROOT_URL:"/",CONTENT_URL:"/content.json"};T.INSIGHT_CONFIG=O}(window)</script><footer id="colophon" class="site-footer" role="contentinfo"><div class="site-info"><div class="footertext"><div class="img-preload"><img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/wordpress-rotating-ball-o.svg"> <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/disqus-preloader.svg"></div><div id="footer-info" class="inner"><p style="color:#666">Blog cungudafa , Copyright &copy; 2020 by 姑 All Rights Reserved.</p></div></div><div class="footer-device"><p style="font-family:Ubuntu,sans-serif"><span style="color:#b9b9b9">Theme <a href="https://github.com/honjun/hexo-theme-sakura" target="_blank" style="color:#b9b9b9;text-decoration:underline dotted rgba(0,0,0,.1)">Sakura</a> <i class="iconfont icon-sakura rotating" style="color:pink;display:inline-block"></i> by <a href="https://2heng.xin/" target="_blank" style="color:#b9b9b9;text-decoration:underline dotted rgba(0,0,0,.1)">Mashiro</a>&<a href="https://www.hojun.cn/" target="_blank" style="color:#b9b9b9;text-decoration:underline dotted rgba(0,0,0,.1)">Hojun</a>, Powered by Hexo, Hosted by Coding Pages</span></p></div><span style="color:#f99;padding-left:20px"><i class="fa fa-clock-o" aria-hidden="true"></i> <span id="time" align="center">载入时间中...</span><script>function createtime(){var n=new Date("2020-02-11 17:20:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("time").innerHTML="小破站在各种灾难中苟活了 "+dnum+" 天 "+hnum+" 小时 "+mnum+" 分 "+snum+" 秒"}var now=new Date;setInterval("createtime()",250)</script><span style="color:#f99;padding-left:20px"><i class="fa fa-line-chart" aria-hidden="true"></i> 博客全站共<span class="post-count">9k</span>字</span><span style="color:#f99;padding-left:20px"><i class="fa fa-fire" aria-hidden="true"></i> 总热度 <span id="busuanzi_value_site_pv"></span>℃</span></span></div><div class="skin-menu no-select" id="mainskin" style="position:fixed"><div class="theme-controls row-container"><ul class="menu-list"><li id="white-bg"><i class="fa fa-television" aria-hidden="true"></i></li><li id="sakura-bg"><i class="iconfont icon-sakura"></i></li><li id="gribs-bg"><i class="fa fa-slack" aria-hidden="true"></i></li><li id="KAdots-bg"><i class="iconfont icon-dots"></i></li><li id="totem-bg"><i class="fa fa-optin-monster" aria-hidden="true"></i></li><li id="pixiv-bg"><i class="iconfont icon-pixiv"></i></li><li id="bing-bg"><i class="iconfont icon-bing"></i></li><li id="dark-bg"><i class="fa fa-moon-o" aria-hidden="true"></i></li></ul></div><div class="font-family-controls row-container"><button type="button" class="control-btn-serif selected" data-mode="serif" onclick="mashiro_global.font_control.change_font()">Serif</button> <button type="button" class="control-btn-sans-serif" data-mode="sans-serif" onclick="mashiro_global.font_control.change_font()">Sans Serif</button></div></div><canvas id="night-mode-cover"></canvas><div class="changeSkin-gear no-select"><div class="keys" id="setbtn"><span id="open-skinMenu">切换壁纸 | SCHEME TOOL &nbsp;<i class="iconfont icon-gear inline-block rotating"></i></span></div></div></footer><script type="text/javascript" src="/js/lib.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script><script type="text/javascript" src="/js/InsightSearch.js"></script><script type="text/javascript" src="/js/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/zoom.min.js"></script><script type="text/javascript" src="/js/sakura-app.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine@1.3.4/dist/Valine.min.js"></script><script src="/js/botui.js"></script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script type="text/javascript">if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent))var Poi={pjax:"1",movies:{url:"https://cdn.jsdelivr.net/gh/honjun/hojun@1.2",name:"Unbroken.mp4",live:"close"},windowheight:"fixed",codelamp:"close",ajaxurl:"",order:"asc",formpostion:"bottom"};else var Poi={pjax:"1",movies:{url:"https://cdn.jsdelivr.net/gh/honjun/hojun@1.2",name:"Unbroken.mp4",live:"open"},windowheight:"auto",codelamp:"close",ajaxurl:"",order:"asc",formpostion:"bottom"}</script><script>$(document).ready(function(){if($(".toc").length>0&&document.body.clientWidth>1200){$(".pattern-center").length>0?tocbot.init({tocSelector:".toc",contentSelector:".entry-content",scrollSmooth:!0,headingSelector:"h1, h2, h3, h4, h5",headingsOffset:-400,scrollSmoothOffset:-85}):tocbot.init({tocSelector:".toc",contentSelector:".entry-content",scrollSmooth:!0,headingSelector:"h1, h2, h3, h4, h5",headingsOffset:-85,scrollSmoothOffset:-85});var t=$(".toc").offset().top-95;window.onscroll=function(){var o=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;o>=t?$(".toc").addClass("toc-fixed"):$(".toc").removeClass("toc-fixed")}}})</script><script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><script src="/live2d-widget/autoload.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"><script src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/js/hititle.js"></script><script src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/js/sakura.js"></script><script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/shehuizhuyi.js"></script><canvas class="fireworks" style="position:fixed;left:0;top:0;z-index:1;pointer-events:none"></canvas><script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script><script src="https://cdn.jsdelivr.net/gh/Yafine/cdn@2.5/source/js/fireworks.js"></script><script src="https://cdn.jsdelivr.net/gh/Yafine/cdn@2.5/source/js/cursor.js"></script><script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/love.js"></script><script src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/js/piao.js" type="text/javascript"></script><script src="//instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script><script>!function(e,t,o,a,c,i,n){e.DaoVoiceObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,i=t.createElement(o),n=t.getElementsByTagName(o)[0],i.async=1,i.src=a,i.charset="utf-8",n.parentNode.insertBefore(i,n)}(window,document,"script",("https:"==document.location.protocol?"https:":"http:")+"//widget.daovoice.io/widget/f6b2a0b1.js","daovoice"),daovoice("init",{app_id:"f6b2a0b1"}),daovoice("update")</script><script type="text/javascript">WIDGET={FID:"yqRrzxwtvs"}</script><script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script><div class="openNav no-select" style="height:50px"><div class="iconflat no-select" style="width:50px;height:50px"><div class="icon"></div></div><div class="site-branding search-form-submit"><i class="iconfont js-toggle-search iconsearch icon-search"></i></div></div></section><div id="mo-nav"><div class="m-avatar"><img src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/img/custom/cungudafa.jpg"></div><p style="text-align:center;color:#333;font-weight:900;font-family:Ubuntu,sans-serif;letter-spacing:1.5px">cungudafa姑</p><p style="text-align:center;word-spacing:20px"><a href="http://github.com/cungudafa" class="fa fa-github" target="_blank" style="color:#333;margin-left:20px"></a> <a href="http://weibo.com/3829198906/info" class="fa fa-weibo" target="_blank" style="color:#dd4b39;margin-left:20px"></a> <a href="https://wpa.qq.com/msgrd?v=3&uin=2627039020&site=qq&menu=yes" class="fa fa-qq" target="_blank" style="color:#25c6fe;margin-left:20px"></a></p><ul id="menu-new-1" class="menu"><li><a href="/"><span class="faa-parent animated-hover"><i class="fa fa-fort-awesome faa-shake" aria-hidden="true"></i> 首页</span></a></li><li><a href="/archives"><span class="faa-parent animated-hover"><i class="fa fa-archive faa-shake" aria-hidden="true"></i> 归档</span></a><ul class="sub-menu"><li><a href="/categories/%E6%8A%80%E6%9C%AF/"><i class="fa fa-code" aria-hidden="true"></i> 技术</a></li><li><a href="/categories/%E7%94%9F%E6%B4%BB/"><i class="fa fa-file-text-o" aria-hidden="true"></i> 生活</a></li><li><a href="/categories/%E8%B5%84%E6%BA%90/"><i class="fa fa-cloud-download" aria-hidden="true"></i> 资源</a></li><li><a href="/categories/%E9%9A%8F%E6%83%B3/"><i class="fa fa-commenting-o" aria-hidden="true"></i> 随想</a></li><li><a href="/categories/%E8%BD%AC%E8%BD%BD/"><i class="fa fa-book" aria-hidden="true"></i> 转载</a></li></ul></li><li><a href="javascript:;"><span class="faa-parent animated-hover"><i class="fa fa-list-ul faa-vertical" aria-hidden="true"></i> 清单</span></a><ul class="sub-menu"><li><a href="/tags/%E6%82%A6%E8%AF%BB/"><i class="fa fa-th-list faa-bounce" aria-hidden="true"></i> 书单</a></li><li><a href="/bangumi/"><i class="fa fa-film faa-vertical" aria-hidden="true"></i> 番组</a></li><li><a href="/music/"><i class="fa fa-headphones" aria-hidden="true"></i> 歌单</a></li><li><a href="/tags/%E5%9B%BE%E9%9B%86/"><i class="fa fa-photo" aria-hidden="true"></i> 图集</a></li></ul></li><li><a href="/comment/"><span class="faa-parent animated-hover"><i class="fa fa-pencil-square-o faa-tada" aria-hidden="true"></i> 留言板</span></a></li><li><a href="/links/"><span class="faa-parent animated-hover"><i class="fa fa-link faa-shake" aria-hidden="true"></i> 友人帐</span></a></li><li><a href="/donate/"><span class="faa-parent animated-hover"><i class="fa fa-heart faa-pulse" aria-hidden="true"></i> 赞赏</span></a></li><li><a href="/"><span class="faa-parent animated-hover"><i class="fa fa-leaf faa-wrench" aria-hidden="true"></i> 关于</span></a><ul class="sub-menu"><li><a href="/about/"><i class="fa fa-meetup" aria-hidden="true"></i> 我？</a></li><li><a href="/theme-sakura/"><i class="fa iconfont icon-sakura" aria-hidden="true"></i> 主题</a></li><li><a href="/lab/"><i class="fa fa-cogs" aria-hidden="true"></i> Lab</a></li></ul></li><li><a href="/client/"><span class="faa-parent animated-hover"><i class="fa fa-android faa-vertical" aria-hidden="true"></i> 客户端</span></a></li><li><a href="/atom.xml"><span class="faa-parent animated-hover"><i class="fa fa-rss faa-pulse" aria-hidden="true"></i> RSS</span></a></li></ul><p style="text-align:center;font-size:13px;color:#b9b9b9">&copy 2020 hexo-sakura</p></div><button onclick="topFunction()" class="mobile-cd-top" id="moblieGoTop" title="Go to top" style="display:none"><i class="fa fa-chevron-up" aria-hidden="true"></i></button><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><style>.aplayer .aplayer-lrc{height:35px}.aplayer .aplayer-lrc p{font-size:16px;font-weight:700;line-height:18px!important}.aplayer .aplayer-lrc p.aplayer-lrc-current{color:#FF1493}.aplayer.aplayer-narrow .aplayer-body{left:-66px!important}.aplayer.aplayer-fixed .aplayer-lrc{display:none}.aplayer .aplayer-lrc.aplayer-lrc-hide{display:none!important}.aplayer.aplayer-fixed .lrc-show{display:block;background:rgba(255,255,255,.8)}</style><meting-js id="2660651585" server="netease" type="playlist" fixed="true" autoplay loop order="random" preload="auto" volume="0.7" mutex="true"></meting-js><script>$(function(){$("body").on("click",".aplayer",function(){$(".aplayer-button").hasClass("aplayer-play")?$(".aplayer-lrc").removeClass("lrc-show"):$(".aplayer-lrc").addClass("lrc-show")})})</script></body><!-- rebuild by neat -->